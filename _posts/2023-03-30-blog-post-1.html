<html lang="en-us">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>bayes.js: A Small Library for Doing MCMC in the Browser</title>
    <meta property="og:title" content="MCMC in the Browser" />
    <meta
      property="og:description"
      content="Bayesian data analysis is cool, Markov chain Monte Carlo is the cool technique that makes Bayesian data analysis possible, and wouldn’t it be coolness if you could do all of this in the browser? …"
    />
    <meta property="og:type" content="article" />
    <script
      defer=""
      src="./bayes.js_ A Small Library for Doing MCMC in the Browser _ Rasmus Bååth&#39;s blog_files/auto-render.min.js"
    ></script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        renderMathInElement(document.body, {
          delimiters: [
            { left: "$$", right: "$$", display: true },
            { left: "$", right: "$", display: false },
          ],
        });
      });
    </script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"
      charset="utf-8"
    ></script>
    <script src="https://rawgit.com/rasmusab/bayes.js/master/mcmc.js"></script>
    <script src="https://rawgit.com/rasmusab/bayes.js/master/distributions.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://d3js.org/d3-random.v2.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  </head>

  <body
    class="vsc-initialized"
    data-new-gr-c-s-check-loaded="14.1028.0"
    data-gr-ext-installed=""
  >
    <header>
      <h1><a href="https://www.sumsar.net/">Publishable Stuff</a></h1>
      <h2>Rasmus Bååth's Blog</h2>
      <nav>
        <ul>
          <li><a href="https://www.sumsar.net/about/">About</a></li>

          <li><a href="https://www.sumsar.net/">Blog</a></li>

          <li><a href="https://www.sumsar.net/cv/">CV</a></li>

          <li><a href="https://www.sumsar.net/research/">Research</a></li>

          <li><a href="https://www.sumsar.net/index.xml">RSS</a></li>

          <li><a href="https://twitter.com/rabaath">Twitter</a></li>
        </ul>
      </nav>
      <hr />
    </header>

    <div class="article-meta">
      <h1>
        <span class="title"
          >bayes.js: A Small Library for Doing MCMC in the Browser</span
        >
      </h1>
      <h2 class="date">2015-12-31</h2>
    </div>

    <main>
      <p>
        Bayesian data analysis is cool, Markov chain Monte Carlo is the cool
        technique that makes Bayesian data analysis possible, and wouldn’t it be
        <em>coolness</em> if you could do all of this in the browser? That was
        what I thought, at least, and I’ve now made
        <a href="https://github.com/rasmusab/bayes.js">bayes.js</a>: A small
        JavaScript library that implements an adaptive MCMC sampler and a couple
        of probability distributions, and that makes it relatively easy to
        implement simple Bayesian models in JavaScript.
      </p>
      <p>
        Here is a motivating example: Say that you have the heights of the last
        ten American presidents…
      </p>
      <div class="highlight">
        <pre
          tabindex="0"
          style="
            background-color: #f0f0f0;
            -moz-tab-size: 4;
            -o-tab-size: 4;
            tab-size: 4;
          "
        ><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic">// The heights of the last ten American presidents in cm, from Kennedy to Obama 
</span></span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic"></span><span style="color:#007020;font-weight:bold">var</span> heights <span style="color:#666">=</span> [<span style="color:#40a070">183</span>, <span style="color:#40a070">192</span>, <span style="color:#40a070">182</span>, <span style="color:#40a070">183</span>, <span style="color:#40a070">177</span>, <span style="color:#40a070">185</span>, <span style="color:#40a070">188</span>, <span style="color:#40a070">188</span>, <span style="color:#40a070">182</span>, <span style="color:#40a070">185</span>];
</span></span></code></pre>
      </div>
      <p>
        … and that you would like to fit a Bayesian model assuming a Normal
        distribution to this data. Well, you can do that
        <strong>right now</strong> by clicking “Start sampling” below! This will
        run an MCMC sampler in your browser implemented in JavaScript.
      </p>
      <p>
        <button onclick="sample_loop()">Start sampling</button>
        <button onclick="stop_sample_loop()">
          Stop sampling and plot histograms
        </button>
        <button onclick="clear_samples()">Clear samples</button>
      </p>
      <div id="mcmc_plots_div">
        <div>
          <div
            id="mu_trace_div"
            style="width: 300px; height: 200px; display: inline-block"
            class="js-plotly-plot"
          >
            <div class="plot-container plotly">
              <div
                class="svg-container"
                style="position: relative; width: 300px; height: 200px"
              >
                <svg
                  class="main-svg"
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                  width="300"
                  height="200"
                  style="background: rgb(255, 255, 255)"
                >
                  <defs id="defs-44f76c">
                    <g class="clips">
                      <clippath class="axesclip" id="clip44f76cx">
                        <rect x="40" y="0" width="250" height="200"></rect>
                      </clippath>
                      <clippath class="axesclip" id="clip44f76cy">
                        <rect x="0" y="40" width="300" height="120"></rect>
                      </clippath>
                      <clippath class="axesclip" id="clip44f76cxy">
                        <rect x="40" y="40" width="250" height="120"></rect>
                      </clippath>
                    </g>
                  </defs>
                  <g class="draglayer">
                    <g transform="translate(40,40)">
                      <rect
                        class="drag nsewdrag cursor-crosshair"
                        data-subplot="xy"
                        x="0"
                        y="0"
                        width="250"
                        height="120"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag nwdrag cursor-nw-resize"
                        data-subplot="xy"
                        x="-20"
                        y="-20"
                        width="20"
                        height="20"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag nedrag cursor-ne-resize"
                        data-subplot="xy"
                        x="250"
                        y="-20"
                        width="20"
                        height="20"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag swdrag cursor-sw-resize"
                        data-subplot="xy"
                        x="-20"
                        y="120"
                        width="20"
                        height="20"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag sedrag cursor-se-resize"
                        data-subplot="xy"
                        x="250"
                        y="120"
                        width="20"
                        height="20"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag ewdrag cursor-ew-resize"
                        data-subplot="xy"
                        x="25"
                        y="124.5"
                        width="200"
                        height="20"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag wdrag cursor-w-resize"
                        data-subplot="xy"
                        x="0"
                        y="124.5"
                        width="25"
                        height="20"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag edrag cursor-e-resize"
                        data-subplot="xy"
                        x="225"
                        y="124.5"
                        width="25"
                        height="20"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag nsdrag cursor-ns-resize"
                        data-subplot="xy"
                        x="-24.5"
                        y="12"
                        width="20"
                        height="96"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag sdrag cursor-s-resize"
                        data-subplot="xy"
                        x="-24.5"
                        y="108"
                        width="20"
                        height="12"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag ndrag cursor-n-resize"
                        data-subplot="xy"
                        x="-24.5"
                        y="0"
                        width="20"
                        height="12"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                    </g>
                  </g>
                  <g class="subplot xy">
                    <rect
                      x="36"
                      y="36"
                      width="258"
                      height="128"
                      style="
                        stroke-width: 0;
                        fill: rgb(255, 255, 255);
                        fill-opacity: 1;
                      "
                    ></rect>
                    <g transform="translate(40,40)">
                      <path
                        class="xgrid crisp"
                        d="M0,0v120"
                        transform="translate(62.5,0)"
                        style="
                          stroke: rgb(238, 238, 238);
                          stroke-opacity: 1;
                          stroke-width: 1px;
                        "
                      ></path>
                      <path
                        class="xgrid crisp"
                        d="M0,0v120"
                        transform="translate(187.5,0)"
                        style="
                          stroke: rgb(238, 238, 238);
                          stroke-opacity: 1;
                          stroke-width: 1px;
                        "
                      ></path>
                      <path
                        class="ygrid crisp"
                        d="M0,0h250"
                        transform="translate(0,91.54)"
                        style="
                          stroke: rgb(238, 238, 238);
                          stroke-opacity: 1;
                          stroke-width: 1px;
                        "
                      ></path>
                      <path
                        class="ygrid crisp"
                        d="M0,0h250"
                        transform="translate(0,61.54)"
                        style="
                          stroke: rgb(238, 238, 238);
                          stroke-opacity: 1;
                          stroke-width: 1px;
                        "
                      ></path>
                      <path
                        class="ygrid crisp"
                        d="M0,0h250"
                        transform="translate(0,31.54)"
                        style="
                          stroke: rgb(238, 238, 238);
                          stroke-opacity: 1;
                          stroke-width: 1px;
                        "
                      ></path>
                      <path
                        class="ygrid crisp"
                        d="M0,0h250"
                        transform="translate(0,1.54)"
                        style="
                          stroke: rgb(238, 238, 238);
                          stroke-opacity: 1;
                          stroke-width: 1px;
                        "
                      ></path>
                    </g>
                    <g></g>
                    <g transform="translate(40,40)">
                      <path
                        class="xzl zl crisp"
                        d="M0,0v120"
                        transform="translate(125,0)"
                        style="
                          stroke: rgb(68, 68, 68);
                          stroke-opacity: 1;
                          stroke-width: 1px;
                        "
                      ></path>
                    </g>
                    <g></g>
                    <svg
                      preserveAspectRatio="none"
                      x="40"
                      y="40"
                      width="250"
                      height="120"
                      viewBox="0 0 250 120"
                      style="fill: none"
                    >
                      <g class="maplayer"></g>
                      <g class="barlayer"></g>
                      <g class="errorlayer"><g class="errorbars"></g></g>
                      <g class="boxlayer"></g>
                      <g class="scatterlayer">
                        <g
                          class="trace scatter"
                          style="stroke-miterlimit: 2; opacity: 1"
                        >
                          <g class="points">
                            <path
                              class="point"
                              transform="translate(125,60)"
                              d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"
                              style="
                                opacity: 1;
                                stroke-width: 0px;
                                fill: rgb(31, 119, 180);
                                fill-opacity: 1;
                              "
                            ></path>
                          </g>
                        </g>
                      </g>
                    </svg>
                    <g></g>
                    <path
                      class="crisp"
                      transform="translate(40,40)"
                      d="M-5,124.5h260"
                      style="
                        fill: none;
                        stroke-width: 1px;
                        stroke: rgb(0, 0, 0);
                        stroke-opacity: 0;
                      "
                    ></path>
                    <path
                      class="crisp"
                      transform="translate(40,40)"
                      d="M-4.5,-5v129"
                      stroke-width="1px"
                      style="
                        fill: none;
                        stroke: rgb(0, 0, 0);
                        stroke-opacity: 0;
                      "
                    ></path>
                    <g></g>
                    <g transform="translate(40,40)">
                      <g class="xtick">
                        <text
                          text-anchor="middle"
                          x="0"
                          y="138"
                          transform="translate(0,0)"
                          style="
                            font-family: 'Open Sans', verdana, arial, sans-serif;
                            font-size: 12px;
                            fill: rgb(68, 68, 68);
                            fill-opacity: 1;
                            visibility: visible;
                            white-space: pre;
                          "
                          data-bb="47"
                        >
                          −1
                        </text>
                      </g>
                      <g class="xtick">
                        <text
                          text-anchor="middle"
                          x="0"
                          y="138"
                          transform="translate(62.5,0)"
                          style="
                            font-family: 'Open Sans', verdana, arial, sans-serif;
                            font-size: 12px;
                            fill: rgb(68, 68, 68);
                            fill-opacity: 1;
                            visibility: visible;
                            white-space: pre;
                          "
                          data-bb="48"
                        >
                          −0.5
                        </text>
                      </g>
                      <g class="xtick">
                        <text
                          text-anchor="middle"
                          x="0"
                          y="138"
                          transform="translate(125,0)"
                          style="
                            font-family: 'Open Sans', verdana, arial, sans-serif;
                            font-size: 12px;
                            fill: rgb(68, 68, 68);
                            fill-opacity: 1;
                            visibility: visible;
                            white-space: pre;
                          "
                          data-bb="49"
                        >
                          0
                        </text>
                      </g>
                      <g class="xtick">
                        <text
                          text-anchor="middle"
                          x="0"
                          y="138"
                          transform="translate(187.5,0)"
                          style="
                            font-family: 'Open Sans', verdana, arial, sans-serif;
                            font-size: 12px;
                            fill: rgb(68, 68, 68);
                            fill-opacity: 1;
                            visibility: visible;
                            white-space: pre;
                          "
                          data-bb="50"
                        >
                          0.5
                        </text>
                      </g>
                      <g class="xtick">
                        <text
                          text-anchor="middle"
                          x="0"
                          y="138"
                          transform="translate(250,0)"
                          style="
                            font-family: 'Open Sans', verdana, arial, sans-serif;
                            font-size: 12px;
                            fill: rgb(68, 68, 68);
                            fill-opacity: 1;
                            visibility: visible;
                            white-space: pre;
                          "
                          data-bb="51"
                        >
                          1
                        </text>
                      </g>
                    </g>
                    <g transform="translate(40,40)">
                      <g class="ytick">
                        <text
                          text-anchor="end"
                          x="-6"
                          y="6"
                          transform="translate(0,91.54)"
                          style="
                            font-family: 'Open Sans', verdana, arial, sans-serif;
                            font-size: 12px;
                            fill: rgb(68, 68, 68);
                            fill-opacity: 1;
                            visibility: visible;
                            white-space: pre;
                          "
                        >
                          184
                        </text>
                      </g>
                      <g class="ytick">
                        <text
                          text-anchor="end"
                          x="-6"
                          y="6"
                          transform="translate(0,61.54)"
                          style="
                            font-family: 'Open Sans', verdana, arial, sans-serif;
                            font-size: 12px;
                            fill: rgb(68, 68, 68);
                            fill-opacity: 1;
                            visibility: visible;
                            white-space: pre;
                          "
                        >
                          184.5
                        </text>
                      </g>
                      <g class="ytick">
                        <text
                          text-anchor="end"
                          x="-6"
                          y="6"
                          transform="translate(0,31.54)"
                          style="
                            font-family: 'Open Sans', verdana, arial, sans-serif;
                            font-size: 12px;
                            fill: rgb(68, 68, 68);
                            fill-opacity: 1;
                            visibility: visible;
                            white-space: pre;
                          "
                        >
                          185
                        </text>
                      </g>
                      <g class="ytick">
                        <text
                          text-anchor="end"
                          x="-6"
                          y="6"
                          transform="translate(0,1.54)"
                          style="
                            font-family: 'Open Sans', verdana, arial, sans-serif;
                            font-size: 12px;
                            fill: rgb(68, 68, 68);
                            fill-opacity: 1;
                            visibility: visible;
                            white-space: pre;
                          "
                        >
                          185.5
                        </text>
                      </g>
                    </g>
                    <g></g>
                  </g>
                  <g class="shapelayer"></g>
                  <g class="pielayer"></g>
                  <g class="glimages"></g>
                  <g class="geoimages"></g>
                  <text
                    class="js-plot-link-container"
                    y="191"
                    text-anchor="end"
                    x="293"
                    style="
                      font-family: 'Open Sans', Arial, sans-serif;
                      font-size: 12px;
                      fill: rgb(68, 68, 68);
                      pointer-events: all;
                    "
                  >
                    <tspan class="js-link-to-tool"></tspan>
                    <tspan class="js-link-spacer"></tspan>
                    <tspan class="js-sourcelinks"></tspan>
                  </text>
                </svg>
                <div class="gl-container"></div>
                <div class="geo-container"></div>
                <svg
                  class="main-svg"
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                  width="300"
                  height="200"
                >
                  <g class="infolayer">
                    <g class="g-gtitle">
                      <text
                        class="gtitle"
                        data-unformatted="Traceplot of mu"
                        x="150"
                        y="20"
                        text-anchor="middle"
                        style="
                          font-family: 'Open Sans', verdana, arial, sans-serif;
                          font-size: 17px;
                          fill: rgb(68, 68, 68);
                          opacity: 1;
                          font-weight: normal;
                          white-space: pre;
                          visibility: visible;
                        "
                      >
                        Traceplot of mu
                      </text>
                    </g>
                    <g
                      class="g-xtitle"
                      data-bb="52"
                      transform="translate(0,-15)"
                    ></g>
                    <g
                      class="g-ytitle"
                      data-bb="53"
                      transform="translate(12,0)"
                    ></g>
                  </g>
                  <g class="hoverlayer"></g>
                </svg>
                <div class="modebar modebar--hover">
                  <div class="modebar-group">
                    <a
                      rel="tooltip"
                      class="modebar-btn"
                      data-title="Download plot as a png"
                      data-toggle="false"
                      data-gravity="n"
                      ><svg height="1em" width="1em" viewBox="0 0 1000 1000">
                        <path
                          d="m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg></a
                    ><a
                      rel="tooltip"
                      class="modebar-btn"
                      data-title="Save and edit plot in cloud"
                      data-toggle="false"
                      data-gravity="n"
                      ><svg
                        height="1em"
                        width="0.8571em"
                        viewBox="0 0 857.1 1000"
                      >
                        <path
                          d="m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg
                    ></a>
                  </div>
                  <div class="modebar-group">
                    <a
                      rel="tooltip"
                      class="modebar-btn active"
                      data-title="Zoom"
                      data-attr="dragmode"
                      data-val="zoom"
                      data-toggle="false"
                      data-gravity="n"
                      ><svg height="1em" width="1em" viewBox="0 0 1000 1000">
                        <path
                          d="m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg></a
                    ><a
                      rel="tooltip"
                      class="modebar-btn"
                      data-title="Pan"
                      data-attr="dragmode"
                      data-val="pan"
                      data-toggle="false"
                      data-gravity="n"
                      ><svg height="1em" width="1em" viewBox="0 0 1000 1000">
                        <path
                          d="m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg
                    ></a>
                  </div>
                  <div class="modebar-group">
                    <a
                      rel="tooltip"
                      class="modebar-btn"
                      data-title="Zoom in"
                      data-attr="zoom"
                      data-val="in"
                      data-toggle="false"
                      data-gravity="n"
                      ><svg height="1em" width="1em" viewBox="0 0 1000 1000">
                        <path
                          d="m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg></a
                    ><a
                      rel="tooltip"
                      class="modebar-btn"
                      data-title="Zoom out"
                      data-attr="zoom"
                      data-val="out"
                      data-toggle="false"
                      data-gravity="n"
                      ><svg height="1em" width="1em" viewBox="0 0 1000 1000">
                        <path
                          d="m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg></a
                    ><a
                      rel="tooltip"
                      class="modebar-btn"
                      data-title="Autoscale"
                      data-attr="zoom"
                      data-val="auto"
                      data-toggle="false"
                      data-gravity="n"
                      ><svg height="1em" width="1em" viewBox="0 0 1000 1000">
                        <path
                          d="m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg></a
                    ><a
                      rel="tooltip"
                      class="modebar-btn"
                      data-title="Reset axes"
                      data-attr="zoom"
                      data-val="reset"
                      data-toggle="false"
                      data-gravity="n"
                      ><svg
                        height="1em"
                        width="0.9286em"
                        viewBox="0 0 928.6 1000"
                      >
                        <path
                          d="m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg
                    ></a>
                  </div>
                  <div class="modebar-group">
                    <a
                      rel="tooltip"
                      class="modebar-btn"
                      data-title="Show closest data on hover"
                      data-attr="hovermode"
                      data-val="closest"
                      data-toggle="false"
                      data-gravity="ne"
                      ><svg height="1em" width="1.5em" viewBox="0 0 1500 1000">
                        <path
                          d="m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg></a
                    ><a
                      rel="tooltip"
                      class="modebar-btn active"
                      data-title="Compare data on hover"
                      data-attr="hovermode"
                      data-val="x"
                      data-toggle="false"
                      data-gravity="ne"
                      ><svg
                        height="1em"
                        width="1.125em"
                        viewBox="0 0 1125 1000"
                      >
                        <path
                          d="m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg
                    ></a>
                  </div>
                  <div class="modebar-group">
                    <a
                      href="https://plot.ly/"
                      target="_blank"
                      data-title="Produced with Plotly"
                      class="modebar-btn plotlyjsicon modebar-btn--logo"
                      ><svg
                        height="1em"
                        width="1.542em"
                        viewBox="0 0 1542 1000"
                      >
                        <path
                          d="m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg
                    ></a>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            id="mu_hist_div"
            style="width: 300px; height: 200px; display: inline-block"
            class="js-plotly-plot"
          >
            <div class="plot-container plotly">
              <div
                class="svg-container"
                style="position: relative; width: 300px; height: 200px"
              >
                <svg
                  class="main-svg"
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                  width="300"
                  height="200"
                  style="background: rgb(255, 255, 255)"
                >
                  <defs id="defs-599824">
                    <g class="clips">
                      <clippath class="axesclip" id="clip599824x">
                        <rect x="40" y="0" width="250" height="200"></rect>
                      </clippath>
                      <clippath class="axesclip" id="clip599824y">
                        <rect x="0" y="40" width="300" height="120"></rect>
                      </clippath>
                      <clippath class="axesclip" id="clip599824xy">
                        <rect x="40" y="40" width="250" height="120"></rect>
                      </clippath>
                    </g>
                  </defs>
                  <g class="draglayer">
                    <g transform="translate(40,40)">
                      <rect
                        class="drag nsewdrag cursor-crosshair"
                        data-subplot="xy"
                        x="0"
                        y="0"
                        width="250"
                        height="120"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag nwdrag cursor-nw-resize"
                        data-subplot="xy"
                        x="-20"
                        y="-20"
                        width="20"
                        height="20"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag nedrag cursor-ne-resize"
                        data-subplot="xy"
                        x="250"
                        y="-20"
                        width="20"
                        height="20"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag swdrag cursor-sw-resize"
                        data-subplot="xy"
                        x="-20"
                        y="120"
                        width="20"
                        height="20"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag sedrag cursor-se-resize"
                        data-subplot="xy"
                        x="250"
                        y="120"
                        width="20"
                        height="20"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag ewdrag cursor-ew-resize"
                        data-subplot="xy"
                        x="25"
                        y="124.5"
                        width="200"
                        height="20"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag wdrag cursor-w-resize"
                        data-subplot="xy"
                        x="0"
                        y="124.5"
                        width="25"
                        height="20"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag edrag cursor-e-resize"
                        data-subplot="xy"
                        x="225"
                        y="124.5"
                        width="25"
                        height="20"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag nsdrag cursor-ns-resize"
                        data-subplot="xy"
                        x="-24.5"
                        y="12"
                        width="20"
                        height="96"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag sdrag cursor-s-resize"
                        data-subplot="xy"
                        x="-24.5"
                        y="108"
                        width="20"
                        height="12"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag ndrag cursor-n-resize"
                        data-subplot="xy"
                        x="-24.5"
                        y="0"
                        width="20"
                        height="12"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                    </g>
                  </g>
                  <g class="subplot xy">
                    <rect
                      x="36"
                      y="36"
                      width="258"
                      height="128"
                      style="
                        stroke-width: 0;
                        fill: rgb(255, 255, 255);
                        fill-opacity: 1;
                      "
                    ></rect>
                    <g transform="translate(40,40)">
                      <path
                        class="ygrid crisp"
                        d="M0,0h250"
                        transform="translate(0,63)"
                        style="
                          stroke: rgb(238, 238, 238);
                          stroke-opacity: 1;
                          stroke-width: 1px;
                        "
                      ></path>
                      <path
                        class="ygrid crisp"
                        d="M0,0h250"
                        transform="translate(0,6)"
                        style="
                          stroke: rgb(238, 238, 238);
                          stroke-opacity: 1;
                          stroke-width: 1px;
                        "
                      ></path>
                    </g>
                    <g></g>
                    <g transform="translate(40,40)">
                      <path
                        class="yzl zl crisp"
                        d="M0,0h250"
                        transform="translate(0,120)"
                        style="
                          stroke: rgb(68, 68, 68);
                          stroke-opacity: 1;
                          stroke-width: 1px;
                        "
                      ></path>
                    </g>
                    <g></g>
                    <svg
                      preserveAspectRatio="none"
                      x="40"
                      y="40"
                      width="250"
                      height="120"
                      viewBox="0 0 250 120"
                      style="fill: none"
                    >
                      <g class="maplayer"></g>
                      <g class="barlayer">
                        <g
                          class="trace bars"
                          shape-rendering="crispEdges"
                          style="opacity: 1"
                        >
                          <g class="points">
                            <path
                              d="M0,120V6H16V120Z"
                              style="
                                stroke-width: 0px;
                                fill: rgb(31, 119, 180);
                                fill-opacity: 1;
                              "
                            ></path>
                          </g>
                        </g>
                      </g>
                      <g class="errorlayer"><g class="errorbars"></g></g>
                      <g class="boxlayer"></g>
                      <g class="scatterlayer"></g>
                    </svg>
                    <g></g>
                    <path
                      class="crisp"
                      transform="translate(40,40)"
                      d="M-5,124.5h260"
                      style="
                        fill: none;
                        stroke-width: 1px;
                        stroke: rgb(0, 0, 0);
                        stroke-opacity: 0;
                      "
                    ></path>
                    <path
                      class="crisp"
                      transform="translate(40,40)"
                      d="M-4.5,-5v129"
                      stroke-width="1px"
                      style="
                        fill: none;
                        stroke: rgb(0, 0, 0);
                        stroke-opacity: 0;
                      "
                    ></path>
                    <g></g>
                    <g transform="translate(40,40)">
                      <g class="xtick">
                        <text
                          text-anchor="middle"
                          x="0"
                          y="138"
                          transform="translate(46.88,0)"
                          style="
                            font-family: 'Open Sans', verdana, arial, sans-serif;
                            font-size: 12px;
                            fill: rgb(68, 68, 68);
                            fill-opacity: 1;
                            visibility: visible;
                            white-space: pre;
                          "
                          data-bb="61"
                        >
                          186
                        </text>
                      </g>
                      <g class="xtick">
                        <text
                          text-anchor="middle"
                          x="0"
                          y="138"
                          transform="translate(109.38,0)"
                          style="
                            font-family: 'Open Sans', verdana, arial, sans-serif;
                            font-size: 12px;
                            fill: rgb(68, 68, 68);
                            fill-opacity: 1;
                            visibility: visible;
                            white-space: pre;
                          "
                          data-bb="62"
                        >
                          188
                        </text>
                      </g>
                      <g class="xtick">
                        <text
                          text-anchor="middle"
                          x="0"
                          y="138"
                          transform="translate(171.88,0)"
                          style="
                            font-family: 'Open Sans', verdana, arial, sans-serif;
                            font-size: 12px;
                            fill: rgb(68, 68, 68);
                            fill-opacity: 1;
                            visibility: visible;
                            white-space: pre;
                          "
                          data-bb="63"
                        >
                          190
                        </text>
                      </g>
                      <g class="xtick">
                        <text
                          text-anchor="middle"
                          x="0"
                          y="138"
                          transform="translate(234.38,0)"
                          style="
                            font-family: 'Open Sans', verdana, arial, sans-serif;
                            font-size: 12px;
                            fill: rgb(68, 68, 68);
                            fill-opacity: 1;
                            visibility: visible;
                            white-space: pre;
                          "
                          data-bb="64"
                        >
                          192
                        </text>
                      </g>
                    </g>
                    <g transform="translate(40,40)">
                      <g class="ytick">
                        <text
                          text-anchor="end"
                          x="-6"
                          y="6"
                          transform="translate(0,120)"
                          style="
                            font-family: 'Open Sans', verdana, arial, sans-serif;
                            font-size: 12px;
                            fill: rgb(68, 68, 68);
                            fill-opacity: 1;
                            visibility: visible;
                            white-space: pre;
                          "
                        >
                          0
                        </text>
                      </g>
                      <g class="ytick">
                        <text
                          text-anchor="end"
                          x="-6"
                          y="6"
                          transform="translate(0,63)"
                          style="
                            font-family: 'Open Sans', verdana, arial, sans-serif;
                            font-size: 12px;
                            fill: rgb(68, 68, 68);
                            fill-opacity: 1;
                            visibility: visible;
                            white-space: pre;
                          "
                        >
                          0.5
                        </text>
                      </g>
                      <g class="ytick">
                        <text
                          text-anchor="end"
                          x="-6"
                          y="6"
                          transform="translate(0,6)"
                          style="
                            font-family: 'Open Sans', verdana, arial, sans-serif;
                            font-size: 12px;
                            fill: rgb(68, 68, 68);
                            fill-opacity: 1;
                            visibility: visible;
                            white-space: pre;
                          "
                        >
                          1
                        </text>
                      </g>
                    </g>
                    <g></g>
                  </g>
                  <g class="shapelayer"></g>
                  <g class="pielayer"></g>
                  <g class="glimages"></g>
                  <g class="geoimages"></g>
                  <text
                    class="js-plot-link-container"
                    y="191"
                    text-anchor="end"
                    x="293"
                    style="
                      font-family: 'Open Sans', Arial, sans-serif;
                      font-size: 12px;
                      fill: rgb(68, 68, 68);
                      pointer-events: all;
                    "
                  >
                    <tspan class="js-link-to-tool"></tspan>
                    <tspan class="js-link-spacer"></tspan>
                    <tspan class="js-sourcelinks"></tspan>
                  </text>
                </svg>
                <div class="gl-container"></div>
                <div class="geo-container"></div>
                <svg
                  class="main-svg"
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                  width="300"
                  height="200"
                >
                  <g class="infolayer">
                    <g class="g-gtitle">
                      <text
                        class="gtitle"
                        data-unformatted="Posterior of mu"
                        x="150"
                        y="20"
                        text-anchor="middle"
                        style="
                          font-family: 'Open Sans', verdana, arial, sans-serif;
                          font-size: 17px;
                          fill: rgb(68, 68, 68);
                          opacity: 1;
                          font-weight: normal;
                          white-space: pre;
                          visibility: visible;
                        "
                      >
                        Posterior of mu
                      </text>
                    </g>
                    <g
                      class="g-xtitle"
                      data-bb="65"
                      transform="translate(0,-15)"
                    ></g>
                    <g
                      class="g-ytitle"
                      data-bb="66"
                      transform="translate(12,0)"
                    ></g>
                  </g>
                  <g class="hoverlayer"></g>
                </svg>
                <div class="modebar modebar--hover">
                  <div class="modebar-group">
                    <a
                      rel="tooltip"
                      class="modebar-btn"
                      data-title="Download plot as a png"
                      data-toggle="false"
                      data-gravity="n"
                      ><svg height="1em" width="1em" viewBox="0 0 1000 1000">
                        <path
                          d="m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg></a
                    ><a
                      rel="tooltip"
                      class="modebar-btn"
                      data-title="Save and edit plot in cloud"
                      data-toggle="false"
                      data-gravity="n"
                      ><svg
                        height="1em"
                        width="0.8571em"
                        viewBox="0 0 857.1 1000"
                      >
                        <path
                          d="m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg
                    ></a>
                  </div>
                  <div class="modebar-group">
                    <a
                      rel="tooltip"
                      class="modebar-btn active"
                      data-title="Zoom"
                      data-attr="dragmode"
                      data-val="zoom"
                      data-toggle="false"
                      data-gravity="n"
                      ><svg height="1em" width="1em" viewBox="0 0 1000 1000">
                        <path
                          d="m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg></a
                    ><a
                      rel="tooltip"
                      class="modebar-btn"
                      data-title="Pan"
                      data-attr="dragmode"
                      data-val="pan"
                      data-toggle="false"
                      data-gravity="n"
                      ><svg height="1em" width="1em" viewBox="0 0 1000 1000">
                        <path
                          d="m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg
                    ></a>
                  </div>
                  <div class="modebar-group">
                    <a
                      rel="tooltip"
                      class="modebar-btn"
                      data-title="Zoom in"
                      data-attr="zoom"
                      data-val="in"
                      data-toggle="false"
                      data-gravity="n"
                      ><svg height="1em" width="1em" viewBox="0 0 1000 1000">
                        <path
                          d="m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg></a
                    ><a
                      rel="tooltip"
                      class="modebar-btn"
                      data-title="Zoom out"
                      data-attr="zoom"
                      data-val="out"
                      data-toggle="false"
                      data-gravity="n"
                      ><svg height="1em" width="1em" viewBox="0 0 1000 1000">
                        <path
                          d="m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg></a
                    ><a
                      rel="tooltip"
                      class="modebar-btn"
                      data-title="Autoscale"
                      data-attr="zoom"
                      data-val="auto"
                      data-toggle="false"
                      data-gravity="n"
                      ><svg height="1em" width="1em" viewBox="0 0 1000 1000">
                        <path
                          d="m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg></a
                    ><a
                      rel="tooltip"
                      class="modebar-btn"
                      data-title="Reset axes"
                      data-attr="zoom"
                      data-val="reset"
                      data-toggle="false"
                      data-gravity="n"
                      ><svg
                        height="1em"
                        width="0.9286em"
                        viewBox="0 0 928.6 1000"
                      >
                        <path
                          d="m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg
                    ></a>
                  </div>
                  <div class="modebar-group">
                    <a
                      rel="tooltip"
                      class="modebar-btn"
                      data-title="Show closest data on hover"
                      data-attr="hovermode"
                      data-val="closest"
                      data-toggle="false"
                      data-gravity="ne"
                      ><svg height="1em" width="1.5em" viewBox="0 0 1500 1000">
                        <path
                          d="m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg></a
                    ><a
                      rel="tooltip"
                      class="modebar-btn active"
                      data-title="Compare data on hover"
                      data-attr="hovermode"
                      data-val="x"
                      data-toggle="false"
                      data-gravity="ne"
                      ><svg
                        height="1em"
                        width="1.125em"
                        viewBox="0 0 1125 1000"
                      >
                        <path
                          d="m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg
                    ></a>
                  </div>
                  <div class="modebar-group">
                    <a
                      href="https://plot.ly/"
                      target="_blank"
                      data-title="Produced with Plotly"
                      class="modebar-btn plotlyjsicon modebar-btn--logo"
                      ><svg
                        height="1em"
                        width="1.542em"
                        viewBox="0 0 1542 1000"
                      >
                        <path
                          d="m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg
                    ></a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div>
          <div
            id="sigma_trace_div"
            style="width: 300px; height: 200px; display: inline-block"
            class="js-plotly-plot"
          >
            <div class="plot-container plotly">
              <div
                class="svg-container"
                style="position: relative; width: 300px; height: 200px"
              >
                <svg
                  class="main-svg"
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                  width="300"
                  height="200"
                  style="background: rgb(255, 255, 255)"
                >
                  <defs id="defs-7774b4">
                    <g class="clips">
                      <clippath class="axesclip" id="clip7774b4x">
                        <rect x="40" y="0" width="250" height="200"></rect>
                      </clippath>
                      <clippath class="axesclip" id="clip7774b4y">
                        <rect x="0" y="40" width="300" height="120"></rect>
                      </clippath>
                      <clippath class="axesclip" id="clip7774b4xy">
                        <rect x="40" y="40" width="250" height="120"></rect>
                      </clippath>
                    </g>
                  </defs>
                  <g class="draglayer">
                    <g transform="translate(40,40)">
                      <rect
                        class="drag nsewdrag cursor-crosshair"
                        data-subplot="xy"
                        x="0"
                        y="0"
                        width="250"
                        height="120"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag nwdrag cursor-nw-resize"
                        data-subplot="xy"
                        x="-20"
                        y="-20"
                        width="20"
                        height="20"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag nedrag cursor-ne-resize"
                        data-subplot="xy"
                        x="250"
                        y="-20"
                        width="20"
                        height="20"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag swdrag cursor-sw-resize"
                        data-subplot="xy"
                        x="-20"
                        y="120"
                        width="20"
                        height="20"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag sedrag cursor-se-resize"
                        data-subplot="xy"
                        x="250"
                        y="120"
                        width="20"
                        height="20"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag ewdrag cursor-ew-resize"
                        data-subplot="xy"
                        x="25"
                        y="124.5"
                        width="200"
                        height="20"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag wdrag cursor-w-resize"
                        data-subplot="xy"
                        x="0"
                        y="124.5"
                        width="25"
                        height="20"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag edrag cursor-e-resize"
                        data-subplot="xy"
                        x="225"
                        y="124.5"
                        width="25"
                        height="20"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag nsdrag cursor-ns-resize"
                        data-subplot="xy"
                        x="-24.5"
                        y="12"
                        width="20"
                        height="96"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag sdrag cursor-s-resize"
                        data-subplot="xy"
                        x="-24.5"
                        y="108"
                        width="20"
                        height="12"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag ndrag cursor-n-resize"
                        data-subplot="xy"
                        x="-24.5"
                        y="0"
                        width="20"
                        height="12"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                    </g>
                  </g>
                  <g class="subplot xy">
                    <rect
                      x="36"
                      y="36"
                      width="258"
                      height="128"
                      style="
                        stroke-width: 0;
                        fill: rgb(255, 255, 255);
                        fill-opacity: 1;
                      "
                    ></rect>
                    <g transform="translate(40,40)">
                      <path
                        class="xgrid crisp"
                        d="M0,0v120"
                        transform="translate(62.5,0)"
                        style="
                          stroke: rgb(238, 238, 238);
                          stroke-opacity: 1;
                          stroke-width: 1px;
                        "
                      ></path>
                      <path
                        class="xgrid crisp"
                        d="M0,0v120"
                        transform="translate(187.5,0)"
                        style="
                          stroke: rgb(238, 238, 238);
                          stroke-opacity: 1;
                          stroke-width: 1px;
                        "
                      ></path>
                      <path
                        class="ygrid crisp"
                        d="M0,0h250"
                        transform="translate(0,93.78)"
                        style="
                          stroke: rgb(238, 238, 238);
                          stroke-opacity: 1;
                          stroke-width: 1px;
                        "
                      ></path>
                      <path
                        class="ygrid crisp"
                        d="M0,0h250"
                        transform="translate(0,63.78)"
                        style="
                          stroke: rgb(238, 238, 238);
                          stroke-opacity: 1;
                          stroke-width: 1px;
                        "
                      ></path>
                      <path
                        class="ygrid crisp"
                        d="M0,0h250"
                        transform="translate(0,33.78)"
                        style="
                          stroke: rgb(238, 238, 238);
                          stroke-opacity: 1;
                          stroke-width: 1px;
                        "
                      ></path>
                      <path
                        class="ygrid crisp"
                        d="M0,0h250"
                        transform="translate(0,3.78)"
                        style="
                          stroke: rgb(238, 238, 238);
                          stroke-opacity: 1;
                          stroke-width: 1px;
                        "
                      ></path>
                    </g>
                    <g></g>
                    <g transform="translate(40,40)">
                      <path
                        class="xzl zl crisp"
                        d="M0,0v120"
                        transform="translate(125,0)"
                        style="
                          stroke: rgb(68, 68, 68);
                          stroke-opacity: 1;
                          stroke-width: 1px;
                        "
                      ></path>
                    </g>
                    <g></g>
                    <svg
                      preserveAspectRatio="none"
                      x="40"
                      y="40"
                      width="250"
                      height="120"
                      viewBox="0 0 250 120"
                      style="fill: none"
                    >
                      <g class="maplayer"></g>
                      <g class="barlayer"></g>
                      <g class="errorlayer"><g class="errorbars"></g></g>
                      <g class="boxlayer"></g>
                      <g class="scatterlayer">
                        <g
                          class="trace scatter"
                          style="stroke-miterlimit: 2; opacity: 1"
                        >
                          <g class="points">
                            <path
                              class="point"
                              transform="translate(125,60)"
                              d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"
                              style="
                                opacity: 1;
                                stroke-width: 0px;
                                fill: rgb(31, 119, 180);
                                fill-opacity: 1;
                              "
                            ></path>
                          </g>
                        </g>
                      </g>
                    </svg>
                    <g></g>
                    <path
                      class="crisp"
                      transform="translate(40,40)"
                      d="M-5,124.5h260"
                      style="
                        fill: none;
                        stroke-width: 1px;
                        stroke: rgb(0, 0, 0);
                        stroke-opacity: 0;
                      "
                    ></path>
                    <path
                      class="crisp"
                      transform="translate(40,40)"
                      d="M-4.5,-5v129"
                      stroke-width="1px"
                      style="
                        fill: none;
                        stroke: rgb(0, 0, 0);
                        stroke-opacity: 0;
                      "
                    ></path>
                    <g></g>
                    <g transform="translate(40,40)">
                      <g class="xtick">
                        <text
                          text-anchor="middle"
                          x="0"
                          y="138"
                          transform="translate(0,0)"
                          style="
                            font-family: 'Open Sans', verdana, arial, sans-serif;
                            font-size: 12px;
                            fill: rgb(68, 68, 68);
                            fill-opacity: 1;
                            visibility: visible;
                            white-space: pre;
                          "
                          data-bb="54"
                        >
                          −1
                        </text>
                      </g>
                      <g class="xtick">
                        <text
                          text-anchor="middle"
                          x="0"
                          y="138"
                          transform="translate(62.5,0)"
                          style="
                            font-family: 'Open Sans', verdana, arial, sans-serif;
                            font-size: 12px;
                            fill: rgb(68, 68, 68);
                            fill-opacity: 1;
                            visibility: visible;
                            white-space: pre;
                          "
                          data-bb="55"
                        >
                          −0.5
                        </text>
                      </g>
                      <g class="xtick">
                        <text
                          text-anchor="middle"
                          x="0"
                          y="138"
                          transform="translate(125,0)"
                          style="
                            font-family: 'Open Sans', verdana, arial, sans-serif;
                            font-size: 12px;
                            fill: rgb(68, 68, 68);
                            fill-opacity: 1;
                            visibility: visible;
                            white-space: pre;
                          "
                          data-bb="56"
                        >
                          0
                        </text>
                      </g>
                      <g class="xtick">
                        <text
                          text-anchor="middle"
                          x="0"
                          y="138"
                          transform="translate(187.5,0)"
                          style="
                            font-family: 'Open Sans', verdana, arial, sans-serif;
                            font-size: 12px;
                            fill: rgb(68, 68, 68);
                            fill-opacity: 1;
                            visibility: visible;
                            white-space: pre;
                          "
                          data-bb="57"
                        >
                          0.5
                        </text>
                      </g>
                      <g class="xtick">
                        <text
                          text-anchor="middle"
                          x="0"
                          y="138"
                          transform="translate(250,0)"
                          style="
                            font-family: 'Open Sans', verdana, arial, sans-serif;
                            font-size: 12px;
                            fill: rgb(68, 68, 68);
                            fill-opacity: 1;
                            visibility: visible;
                            white-space: pre;
                          "
                          data-bb="58"
                        >
                          1
                        </text>
                      </g>
                    </g>
                    <g transform="translate(40,40)">
                      <g class="ytick">
                        <text
                          text-anchor="end"
                          x="-6"
                          y="6"
                          transform="translate(0,93.78)"
                          style="
                            font-family: 'Open Sans', verdana, arial, sans-serif;
                            font-size: 12px;
                            fill: rgb(68, 68, 68);
                            fill-opacity: 1;
                            visibility: visible;
                            white-space: pre;
                          "
                        >
                          4.5
                        </text>
                      </g>
                      <g class="ytick">
                        <text
                          text-anchor="end"
                          x="-6"
                          y="6"
                          transform="translate(0,63.78)"
                          style="
                            font-family: 'Open Sans', verdana, arial, sans-serif;
                            font-size: 12px;
                            fill: rgb(68, 68, 68);
                            fill-opacity: 1;
                            visibility: visible;
                            white-space: pre;
                          "
                        >
                          5
                        </text>
                      </g>
                      <g class="ytick">
                        <text
                          text-anchor="end"
                          x="-6"
                          y="6"
                          transform="translate(0,33.78)"
                          style="
                            font-family: 'Open Sans', verdana, arial, sans-serif;
                            font-size: 12px;
                            fill: rgb(68, 68, 68);
                            fill-opacity: 1;
                            visibility: visible;
                            white-space: pre;
                          "
                        >
                          5.5
                        </text>
                      </g>
                      <g class="ytick">
                        <text
                          text-anchor="end"
                          x="-6"
                          y="6"
                          transform="translate(0,3.78)"
                          style="
                            font-family: 'Open Sans', verdana, arial, sans-serif;
                            font-size: 12px;
                            fill: rgb(68, 68, 68);
                            fill-opacity: 1;
                            visibility: visible;
                            white-space: pre;
                          "
                        >
                          6
                        </text>
                      </g>
                    </g>
                    <g></g>
                  </g>
                  <g class="shapelayer"></g>
                  <g class="pielayer"></g>
                  <g class="glimages"></g>
                  <g class="geoimages"></g>
                  <text
                    class="js-plot-link-container"
                    y="191"
                    text-anchor="end"
                    x="293"
                    style="
                      font-family: 'Open Sans', Arial, sans-serif;
                      font-size: 12px;
                      fill: rgb(68, 68, 68);
                      pointer-events: all;
                    "
                  >
                    <tspan class="js-link-to-tool"></tspan>
                    <tspan class="js-link-spacer"></tspan>
                    <tspan class="js-sourcelinks"></tspan>
                  </text>
                </svg>
                <div class="gl-container"></div>
                <div class="geo-container"></div>
                <svg
                  class="main-svg"
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                  width="300"
                  height="200"
                >
                  <g class="infolayer">
                    <g class="g-gtitle">
                      <text
                        class="gtitle"
                        data-unformatted="Traceplot of sigma"
                        x="150"
                        y="20"
                        text-anchor="middle"
                        style="
                          font-family: 'Open Sans', verdana, arial, sans-serif;
                          font-size: 17px;
                          fill: rgb(68, 68, 68);
                          opacity: 1;
                          font-weight: normal;
                          white-space: pre;
                          visibility: visible;
                        "
                      >
                        Traceplot of sigma
                      </text>
                    </g>
                    <g
                      class="g-xtitle"
                      data-bb="59"
                      transform="translate(0,-15)"
                    ></g>
                    <g
                      class="g-ytitle"
                      data-bb="60"
                      transform="translate(12,0)"
                    ></g>
                  </g>
                  <g class="hoverlayer"></g>
                </svg>
                <div class="modebar modebar--hover">
                  <div class="modebar-group">
                    <a
                      rel="tooltip"
                      class="modebar-btn"
                      data-title="Download plot as a png"
                      data-toggle="false"
                      data-gravity="n"
                      ><svg height="1em" width="1em" viewBox="0 0 1000 1000">
                        <path
                          d="m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg></a
                    ><a
                      rel="tooltip"
                      class="modebar-btn"
                      data-title="Save and edit plot in cloud"
                      data-toggle="false"
                      data-gravity="n"
                      ><svg
                        height="1em"
                        width="0.8571em"
                        viewBox="0 0 857.1 1000"
                      >
                        <path
                          d="m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg
                    ></a>
                  </div>
                  <div class="modebar-group">
                    <a
                      rel="tooltip"
                      class="modebar-btn active"
                      data-title="Zoom"
                      data-attr="dragmode"
                      data-val="zoom"
                      data-toggle="false"
                      data-gravity="n"
                      ><svg height="1em" width="1em" viewBox="0 0 1000 1000">
                        <path
                          d="m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg></a
                    ><a
                      rel="tooltip"
                      class="modebar-btn"
                      data-title="Pan"
                      data-attr="dragmode"
                      data-val="pan"
                      data-toggle="false"
                      data-gravity="n"
                      ><svg height="1em" width="1em" viewBox="0 0 1000 1000">
                        <path
                          d="m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg
                    ></a>
                  </div>
                  <div class="modebar-group">
                    <a
                      rel="tooltip"
                      class="modebar-btn"
                      data-title="Zoom in"
                      data-attr="zoom"
                      data-val="in"
                      data-toggle="false"
                      data-gravity="n"
                      ><svg height="1em" width="1em" viewBox="0 0 1000 1000">
                        <path
                          d="m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg></a
                    ><a
                      rel="tooltip"
                      class="modebar-btn"
                      data-title="Zoom out"
                      data-attr="zoom"
                      data-val="out"
                      data-toggle="false"
                      data-gravity="n"
                      ><svg height="1em" width="1em" viewBox="0 0 1000 1000">
                        <path
                          d="m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg></a
                    ><a
                      rel="tooltip"
                      class="modebar-btn"
                      data-title="Autoscale"
                      data-attr="zoom"
                      data-val="auto"
                      data-toggle="false"
                      data-gravity="n"
                      ><svg height="1em" width="1em" viewBox="0 0 1000 1000">
                        <path
                          d="m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg></a
                    ><a
                      rel="tooltip"
                      class="modebar-btn"
                      data-title="Reset axes"
                      data-attr="zoom"
                      data-val="reset"
                      data-toggle="false"
                      data-gravity="n"
                      ><svg
                        height="1em"
                        width="0.9286em"
                        viewBox="0 0 928.6 1000"
                      >
                        <path
                          d="m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg
                    ></a>
                  </div>
                  <div class="modebar-group">
                    <a
                      rel="tooltip"
                      class="modebar-btn"
                      data-title="Show closest data on hover"
                      data-attr="hovermode"
                      data-val="closest"
                      data-toggle="false"
                      data-gravity="ne"
                      ><svg height="1em" width="1.5em" viewBox="0 0 1500 1000">
                        <path
                          d="m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg></a
                    ><a
                      rel="tooltip"
                      class="modebar-btn active"
                      data-title="Compare data on hover"
                      data-attr="hovermode"
                      data-val="x"
                      data-toggle="false"
                      data-gravity="ne"
                      ><svg
                        height="1em"
                        width="1.125em"
                        viewBox="0 0 1125 1000"
                      >
                        <path
                          d="m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg
                    ></a>
                  </div>
                  <div class="modebar-group">
                    <a
                      href="https://plot.ly/"
                      target="_blank"
                      data-title="Produced with Plotly"
                      class="modebar-btn plotlyjsicon modebar-btn--logo"
                      ><svg
                        height="1em"
                        width="1.542em"
                        viewBox="0 0 1542 1000"
                      >
                        <path
                          d="m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg
                    ></a>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            id="sigma_hist_div"
            style="width: 300px; height: 200px; display: inline-block"
            class="js-plotly-plot"
          >
            <div class="plot-container plotly">
              <div
                class="svg-container"
                style="position: relative; width: 300px; height: 200px"
              >
                <svg
                  class="main-svg"
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                  width="300"
                  height="200"
                  style="background: rgb(255, 255, 255)"
                >
                  <defs id="defs-619347">
                    <g class="clips">
                      <clippath class="axesclip" id="clip619347x">
                        <rect x="40" y="0" width="250" height="200"></rect>
                      </clippath>
                      <clippath class="axesclip" id="clip619347y">
                        <rect x="0" y="40" width="300" height="120"></rect>
                      </clippath>
                      <clippath class="axesclip" id="clip619347xy">
                        <rect x="40" y="40" width="250" height="120"></rect>
                      </clippath>
                    </g>
                  </defs>
                  <g class="draglayer">
                    <g transform="translate(40,40)">
                      <rect
                        class="drag nsewdrag cursor-crosshair"
                        data-subplot="xy"
                        x="0"
                        y="0"
                        width="250"
                        height="120"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag nwdrag cursor-nw-resize"
                        data-subplot="xy"
                        x="-20"
                        y="-20"
                        width="20"
                        height="20"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag nedrag cursor-ne-resize"
                        data-subplot="xy"
                        x="250"
                        y="-20"
                        width="20"
                        height="20"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag swdrag cursor-sw-resize"
                        data-subplot="xy"
                        x="-20"
                        y="120"
                        width="20"
                        height="20"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag sedrag cursor-se-resize"
                        data-subplot="xy"
                        x="250"
                        y="120"
                        width="20"
                        height="20"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag ewdrag cursor-ew-resize"
                        data-subplot="xy"
                        x="25"
                        y="124.5"
                        width="200"
                        height="20"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag wdrag cursor-w-resize"
                        data-subplot="xy"
                        x="0"
                        y="124.5"
                        width="25"
                        height="20"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag edrag cursor-e-resize"
                        data-subplot="xy"
                        x="225"
                        y="124.5"
                        width="25"
                        height="20"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag nsdrag cursor-ns-resize"
                        data-subplot="xy"
                        x="-24.5"
                        y="12"
                        width="20"
                        height="96"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag sdrag cursor-s-resize"
                        data-subplot="xy"
                        x="-24.5"
                        y="108"
                        width="20"
                        height="12"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                      <rect
                        class="drag ndrag cursor-n-resize"
                        data-subplot="xy"
                        x="-24.5"
                        y="0"
                        width="20"
                        height="12"
                        style="
                          fill: transparent;
                          stroke-width: 0;
                          pointer-events: all;
                        "
                      ></rect>
                    </g>
                  </g>
                  <g class="subplot xy">
                    <rect
                      x="36"
                      y="36"
                      width="258"
                      height="128"
                      style="
                        stroke-width: 0;
                        fill: rgb(255, 255, 255);
                        fill-opacity: 1;
                      "
                    ></rect>
                    <g transform="translate(40,40)">
                      <path
                        class="ygrid crisp"
                        d="M0,0h250"
                        transform="translate(0,63)"
                        style="
                          stroke: rgb(238, 238, 238);
                          stroke-opacity: 1;
                          stroke-width: 1px;
                        "
                      ></path>
                      <path
                        class="ygrid crisp"
                        d="M0,0h250"
                        transform="translate(0,6)"
                        style="
                          stroke: rgb(238, 238, 238);
                          stroke-opacity: 1;
                          stroke-width: 1px;
                        "
                      ></path>
                    </g>
                    <g></g>
                    <g transform="translate(40,40)">
                      <path
                        class="yzl zl crisp"
                        d="M0,0h250"
                        transform="translate(0,120)"
                        style="
                          stroke: rgb(68, 68, 68);
                          stroke-opacity: 1;
                          stroke-width: 1px;
                        "
                      ></path>
                    </g>
                    <g></g>
                    <svg
                      preserveAspectRatio="none"
                      x="40"
                      y="40"
                      width="250"
                      height="120"
                      viewBox="0 0 250 120"
                      style="fill: none"
                    >
                      <g class="maplayer"></g>
                      <g class="barlayer">
                        <g
                          class="trace bars"
                          shape-rendering="crispEdges"
                          style="opacity: 1"
                        >
                          <g class="points">
                            <path
                              d="M0,120V6H16V120Z"
                              style="
                                stroke-width: 0px;
                                fill: rgb(31, 119, 180);
                                fill-opacity: 1;
                              "
                            ></path>
                          </g>
                        </g>
                      </g>
                      <g class="errorlayer"><g class="errorbars"></g></g>
                      <g class="boxlayer"></g>
                      <g class="scatterlayer"></g>
                    </svg>
                    <g></g>
                    <path
                      class="crisp"
                      transform="translate(40,40)"
                      d="M-5,124.5h260"
                      style="
                        fill: none;
                        stroke-width: 1px;
                        stroke: rgb(0, 0, 0);
                        stroke-opacity: 0;
                      "
                    ></path>
                    <path
                      class="crisp"
                      transform="translate(40,40)"
                      d="M-4.5,-5v129"
                      stroke-width="1px"
                      style="
                        fill: none;
                        stroke: rgb(0, 0, 0);
                        stroke-opacity: 0;
                      "
                    ></path>
                    <g></g>
                    <g transform="translate(40,40)">
                      <g class="xtick">
                        <text
                          text-anchor="middle"
                          x="0"
                          y="138"
                          transform="translate(31.25,0)"
                          style="
                            font-family: 'Open Sans', verdana, arial, sans-serif;
                            font-size: 12px;
                            fill: rgb(68, 68, 68);
                            fill-opacity: 1;
                            visibility: visible;
                            white-space: pre;
                          "
                          data-bb="67"
                        >
                          6
                        </text>
                      </g>
                      <g class="xtick">
                        <text
                          text-anchor="middle"
                          x="0"
                          y="138"
                          transform="translate(93.75,0)"
                          style="
                            font-family: 'Open Sans', verdana, arial, sans-serif;
                            font-size: 12px;
                            fill: rgb(68, 68, 68);
                            fill-opacity: 1;
                            visibility: visible;
                            white-space: pre;
                          "
                          data-bb="68"
                        >
                          8
                        </text>
                      </g>
                      <g class="xtick">
                        <text
                          text-anchor="middle"
                          x="0"
                          y="138"
                          transform="translate(156.25,0)"
                          style="
                            font-family: 'Open Sans', verdana, arial, sans-serif;
                            font-size: 12px;
                            fill: rgb(68, 68, 68);
                            fill-opacity: 1;
                            visibility: visible;
                            white-space: pre;
                          "
                          data-bb="69"
                        >
                          10
                        </text>
                      </g>
                      <g class="xtick">
                        <text
                          text-anchor="middle"
                          x="0"
                          y="138"
                          transform="translate(218.75,0)"
                          style="
                            font-family: 'Open Sans', verdana, arial, sans-serif;
                            font-size: 12px;
                            fill: rgb(68, 68, 68);
                            fill-opacity: 1;
                            visibility: visible;
                            white-space: pre;
                          "
                          data-bb="70"
                        >
                          12
                        </text>
                      </g>
                    </g>
                    <g transform="translate(40,40)">
                      <g class="ytick">
                        <text
                          text-anchor="end"
                          x="-6"
                          y="6"
                          transform="translate(0,120)"
                          style="
                            font-family: 'Open Sans', verdana, arial, sans-serif;
                            font-size: 12px;
                            fill: rgb(68, 68, 68);
                            fill-opacity: 1;
                            visibility: visible;
                            white-space: pre;
                          "
                        >
                          0
                        </text>
                      </g>
                      <g class="ytick">
                        <text
                          text-anchor="end"
                          x="-6"
                          y="6"
                          transform="translate(0,63)"
                          style="
                            font-family: 'Open Sans', verdana, arial, sans-serif;
                            font-size: 12px;
                            fill: rgb(68, 68, 68);
                            fill-opacity: 1;
                            visibility: visible;
                            white-space: pre;
                          "
                        >
                          0.5
                        </text>
                      </g>
                      <g class="ytick">
                        <text
                          text-anchor="end"
                          x="-6"
                          y="6"
                          transform="translate(0,6)"
                          style="
                            font-family: 'Open Sans', verdana, arial, sans-serif;
                            font-size: 12px;
                            fill: rgb(68, 68, 68);
                            fill-opacity: 1;
                            visibility: visible;
                            white-space: pre;
                          "
                        >
                          1
                        </text>
                      </g>
                    </g>
                    <g></g>
                  </g>
                  <g class="shapelayer"></g>
                  <g class="pielayer"></g>
                  <g class="glimages"></g>
                  <g class="geoimages"></g>
                  <text
                    class="js-plot-link-container"
                    y="191"
                    text-anchor="end"
                    x="293"
                    style="
                      font-family: 'Open Sans', Arial, sans-serif;
                      font-size: 12px;
                      fill: rgb(68, 68, 68);
                      pointer-events: all;
                    "
                  >
                    <tspan class="js-link-to-tool"></tspan>
                    <tspan class="js-link-spacer"></tspan>
                    <tspan class="js-sourcelinks"></tspan>
                  </text>
                </svg>
                <div class="gl-container"></div>
                <div class="geo-container"></div>
                <svg
                  class="main-svg"
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                  width="300"
                  height="200"
                >
                  <g class="infolayer">
                    <g class="g-gtitle">
                      <text
                        class="gtitle"
                        data-unformatted="Posterior of sigma"
                        x="150"
                        y="20"
                        text-anchor="middle"
                        style="
                          font-family: 'Open Sans', verdana, arial, sans-serif;
                          font-size: 17px;
                          fill: rgb(68, 68, 68);
                          opacity: 1;
                          font-weight: normal;
                          white-space: pre;
                          visibility: visible;
                        "
                      >
                        Posterior of sigma
                      </text>
                    </g>
                    <g
                      class="g-xtitle"
                      data-bb="71"
                      transform="translate(0,-15)"
                    ></g>
                    <g
                      class="g-ytitle"
                      data-bb="72"
                      transform="translate(12,0)"
                    ></g>
                  </g>
                  <g class="hoverlayer"></g>
                </svg>
                <div class="modebar modebar--hover">
                  <div class="modebar-group">
                    <a
                      rel="tooltip"
                      class="modebar-btn"
                      data-title="Download plot as a png"
                      data-toggle="false"
                      data-gravity="n"
                      ><svg height="1em" width="1em" viewBox="0 0 1000 1000">
                        <path
                          d="m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg></a
                    ><a
                      rel="tooltip"
                      class="modebar-btn"
                      data-title="Save and edit plot in cloud"
                      data-toggle="false"
                      data-gravity="n"
                      ><svg
                        height="1em"
                        width="0.8571em"
                        viewBox="0 0 857.1 1000"
                      >
                        <path
                          d="m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg
                    ></a>
                  </div>
                  <div class="modebar-group">
                    <a
                      rel="tooltip"
                      class="modebar-btn active"
                      data-title="Zoom"
                      data-attr="dragmode"
                      data-val="zoom"
                      data-toggle="false"
                      data-gravity="n"
                      ><svg height="1em" width="1em" viewBox="0 0 1000 1000">
                        <path
                          d="m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg></a
                    ><a
                      rel="tooltip"
                      class="modebar-btn"
                      data-title="Pan"
                      data-attr="dragmode"
                      data-val="pan"
                      data-toggle="false"
                      data-gravity="n"
                      ><svg height="1em" width="1em" viewBox="0 0 1000 1000">
                        <path
                          d="m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg
                    ></a>
                  </div>
                  <div class="modebar-group">
                    <a
                      rel="tooltip"
                      class="modebar-btn"
                      data-title="Zoom in"
                      data-attr="zoom"
                      data-val="in"
                      data-toggle="false"
                      data-gravity="n"
                      ><svg height="1em" width="1em" viewBox="0 0 1000 1000">
                        <path
                          d="m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg></a
                    ><a
                      rel="tooltip"
                      class="modebar-btn"
                      data-title="Zoom out"
                      data-attr="zoom"
                      data-val="out"
                      data-toggle="false"
                      data-gravity="n"
                      ><svg height="1em" width="1em" viewBox="0 0 1000 1000">
                        <path
                          d="m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg></a
                    ><a
                      rel="tooltip"
                      class="modebar-btn"
                      data-title="Autoscale"
                      data-attr="zoom"
                      data-val="auto"
                      data-toggle="false"
                      data-gravity="n"
                      ><svg height="1em" width="1em" viewBox="0 0 1000 1000">
                        <path
                          d="m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg></a
                    ><a
                      rel="tooltip"
                      class="modebar-btn"
                      data-title="Reset axes"
                      data-attr="zoom"
                      data-val="reset"
                      data-toggle="false"
                      data-gravity="n"
                      ><svg
                        height="1em"
                        width="0.9286em"
                        viewBox="0 0 928.6 1000"
                      >
                        <path
                          d="m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg
                    ></a>
                  </div>
                  <div class="modebar-group">
                    <a
                      rel="tooltip"
                      class="modebar-btn"
                      data-title="Show closest data on hover"
                      data-attr="hovermode"
                      data-val="closest"
                      data-toggle="false"
                      data-gravity="ne"
                      ><svg height="1em" width="1.5em" viewBox="0 0 1500 1000">
                        <path
                          d="m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg></a
                    ><a
                      rel="tooltip"
                      class="modebar-btn active"
                      data-title="Compare data on hover"
                      data-attr="hovermode"
                      data-val="x"
                      data-toggle="false"
                      data-gravity="ne"
                      ><svg
                        height="1em"
                        width="1.125em"
                        viewBox="0 0 1125 1000"
                      >
                        <path
                          d="m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg
                    ></a>
                  </div>
                  <div class="modebar-group">
                    <a
                      href="https://plot.ly/"
                      target="_blank"
                      data-title="Produced with Plotly"
                      class="modebar-btn plotlyjsicon modebar-btn--logo"
                      ><svg
                        height="1em"
                        width="1.542em"
                        viewBox="0 0 1542 1000"
                      >
                        <path
                          d="m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z"
                          transform="matrix(1 0 0 -1 0 850)"
                        ></path></svg
                    ></a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="text_output_div"></div>
      <script>
        function loadScript(url, callback) {
          // Adding the script tag to the head as suggested before
          var head = document.getElementsByTagName("head")[0];
          var script = document.createElement("script");
          script.type = "text/javascript";
          script.src = url;

          // Then bind the event to the callback function.
          // There are several events for cross browser compatibility.
          script.onreadystatechange = callback;
          script.onload = callback;

          // Fire the loading
          head.appendChild(script);
        }

        var clear_samples;
        var sample_loop;
        var stop_sample_loop;

        // loadScript("https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js", function(){
        // loadScript("https://cdn.plot.ly/plotly-1.3.0.min.js", function(){
        loadScript(
          "https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js",
          function () {
            loadScript("https://cdn.plot.ly/plotly-latest.min.js", function () {
              loadScript(
                "https://rawgit.com/rasmusab/bayes.js/master/mcmc.js",
                function () {
                  loadScript(
                    "https://rawgit.com/rasmusab/bayes.js/master/distributions.js",
                    function () {
                      var heights = [
                        183, 192, 182, 177, 185, 188, 188, 182, 185,
                      ];

                      var params = {
                        mu: { type: "real" },
                        sigma: { type: "real", lower: 0 },
                      };

                      var log_post = function (state, heights) {
                        var log_post = 0;
                        // Priors (here sloppy and vague...)
                        log_post += ld.norm(state.mu, 0, 1000);
                        log_post += ld.unif(state.sigma, 0, 1000);
                        // Likelihood
                        for (var i = 0; i < heights.length; i++) {
                          log_post += ld.norm(
                            heights[i],
                            state.mu,
                            state.sigma
                          );
                        }
                        return log_post;
                      };

                      // Initializing the sampler and generate a sample of size 1000
                      var sampler = new mcmc.AmwgSampler(
                        params,
                        log_post,
                        heights
                      );
                      sampler.burn(1000);
                      var samples = sampler.sample(1000);

                      //// Below is just the code to run the sampler and
                      //// to plot the samples. It's somewhat of a hack...
                      ////////////////////////////////////////////////////

                      // Setting up the plots
                      var plot_margins = {
                        l: 40,
                        r: 10,
                        b: 40,
                        t: 40,
                        pad: 4,
                      };

                      var param_names = Object.keys(params);
                      var params_to_plot = Object.keys(params);

                      for (var i = 0; i < params_to_plot.length; i++) {
                        var param = params_to_plot[i];
                        $("div#mcmc_plots_div").append(
                          "<div>" +
                            '<div id = "' +
                            param +
                            "_trace_div" +
                            '" style="width:300px;height:200px;display: inline-block;"></div>' +
                            '<div id = "' +
                            param +
                            "_hist_div" +
                            '" style="width:300px;height:200px;display: inline-block;"></div>' +
                            "</div>"
                        );
                        Plotly.plot(
                          $("div#" + param + "_trace_div")[0],
                          [{ y: samples[param] }],
                          {
                            margin: plot_margins,
                            title: "Traceplot of " + param,
                          }
                        );
                        Plotly.plot(
                          $("div#" + param + "_hist_div")[0],
                          [{ x: samples[param], type: "histogram" }],
                          {
                            margin: plot_margins,
                            title: "Posterior of " + param,
                          }
                        );
                      }

                      var update_trace_plots = function () {
                        for (var i = 0; i < params_to_plot.length; i++) {
                          var param = params_to_plot[i];
                          Plotly.restyle($("div#" + param + "_trace_div")[0], {
                            y: [samples[param]],
                          });
                        }
                      };

                      var update_histograms = function () {
                        for (var i = 0; i < params_to_plot.length; i++) {
                          var param = params_to_plot[i];
                          Plotly.restyle($("div#" + param + "_hist_div")[0], {
                            x: [samples[param]],
                          });
                        }
                      };

                      // Below are the functions that enables starting and stopping the
                      // sampling using the buttons

                      clear_samples = function () {
                        samples = sampler.sample(1);
                        update_trace_plots();
                        update_histograms();
                      };

                      var sample_loop_timeout_id;
                      sample_loop = function () {
                        var n_samples = Math.min(
                          100,
                          Math.ceil(samples[param_names[0]].length / 10)
                        );
                        var more_samples = sampler.sample(n_samples);
                        for (var i = 0; i < param_names.length; i++) {
                          var param = param_names[i];
                          Array.prototype.push.apply(
                            samples[param],
                            more_samples[param]
                          );
                        }
                        update_trace_plots();
                        sample_loop_timeout_id = setTimeout(sample_loop, 1);
                      };

                      stop_sample_loop = function () {
                        clearTimeout(sample_loop_timeout_id);
                        update_trace_plots();
                        update_histograms();
                      };

                      clear_samples();
                    }
                  );
                }
              );
            });
          }
        );
      </script>
      <p>
        <em
          >If this doesn’t seem to work in your browser, for some reason, then
          try
          <a href="https://codepen.io/rasmusab/pen/LpaKep?editors=001"
            >this version</a
          >
          of the demo.</em
        >
      </p>
      <p>Here is the model you just sampled from…</p>
      <p>
        <span
          ><span class="katex-display"
            ><span class="katex"
              ><span class="katex-mathml"
                ><math
                  xmlns="http://www.w3.org/1998/Math/MathML"
                  display="block"
                  ><semantics
                    ><mrow
                      ><mi>μ</mi><mo>∼</mo><mtext>Normal</mtext
                      ><mo stretchy="false">(</mo><mn>0</mn
                      ><mo separator="true">,</mo><mn>1000</mn
                      ><mo stretchy="false">)</mo
                      ><mspace linebreak="newline"></mspace><mi>σ</mi><mo>∼</mo
                      ><mtext>Uniform</mtext><mo stretchy="false">(</mo
                      ><mn>0</mn><mo separator="true">,</mo><mn>1000</mn
                      ><mo stretchy="false">)</mo
                      ><mspace linebreak="newline"></mspace
                      ><msub><mtext>heights</mtext><mi>i</mi></msub
                      ><mo>∼</mo><mtext>Normal</mtext><mo stretchy="false">(</mo
                      ><mi>μ</mi><mo separator="true">,</mo><mi>σ</mi
                      ><mo stretchy="false">)</mo
                      ><mtext>&nbsp;&nbsp;&nbsp;for&nbsp;</mtext><mi>i</mi
                      ><mtext>&nbsp;in</mtext><mn>1..</mn><mi>n</mi></mrow
                    ><annotation encoding="application/x-tex"
                      >\mu \sim \text{Normal}(0, 1000) \\ \sigma \sim
                      \text{Uniform}(0, 1000) \\ \text{heights}_i \sim
                      \text{Normal}(\mu, \sigma) ~~~ \text{for} ~ i ~ \text{in}
                      1..n
                    </annotation></semantics
                  ></math
                ></span
              ><span class="katex-html" aria-hidden="true"
                ><span class="base"
                  ><span
                    class="strut"
                    style="height: 0.625em; vertical-align: -0.1944em"
                  ></span
                  ><span class="mord mathnormal">μ</span
                  ><span class="mspace" style="margin-right: 0.2778em"></span
                  ><span class="mrel">∼</span
                  ><span
                    class="mspace"
                    style="margin-right: 0.2778em"
                  ></span></span
                ><span class="base"
                  ><span
                    class="strut"
                    style="height: 1em; vertical-align: -0.25em"
                  ></span
                  ><span class="mord text"
                    ><span class="mord">Normal</span></span
                  ><span class="mopen">(</span><span class="mord">0</span
                  ><span class="mpunct">,</span
                  ><span class="mspace" style="margin-right: 0.1667em"></span
                  ><span class="mord">1000</span
                  ><span class="mclose">)</span></span
                ><span class="mspace newline"></span
                ><span class="base"
                  ><span class="strut" style="height: 0.4306em"></span
                  ><span class="mord mathnormal" style="margin-right: 0.0359em"
                    >σ</span
                  ><span class="mspace" style="margin-right: 0.2778em"></span
                  ><span class="mrel">∼</span
                  ><span
                    class="mspace"
                    style="margin-right: 0.2778em"
                  ></span></span
                ><span class="base"
                  ><span
                    class="strut"
                    style="height: 1em; vertical-align: -0.25em"
                  ></span
                  ><span class="mord text"
                    ><span class="mord">Uniform</span></span
                  ><span class="mopen">(</span><span class="mord">0</span
                  ><span class="mpunct">,</span
                  ><span class="mspace" style="margin-right: 0.1667em"></span
                  ><span class="mord">1000</span
                  ><span class="mclose">)</span></span
                ><span class="mspace newline"></span
                ><span class="base"
                  ><span
                    class="strut"
                    style="height: 0.9386em; vertical-align: -0.2441em"
                  ></span
                  ><span class="mord"
                    ><span class="mord text"
                      ><span class="mord">heights</span></span
                    ><span class="msupsub"
                      ><span class="vlist-t vlist-t2"
                        ><span class="vlist-r"
                          ><span class="vlist" style="height: 0.2175em"
                            ><span
                              class=""
                              style="top: -2.4559em; margin-right: 0.05em"
                              ><span class="pstrut" style="height: 2.7em"></span
                              ><span class="sizing reset-size6 size3 mtight"
                                ><span class="mord mathnormal mtight"
                                  >i</span
                                ></span
                              ></span
                            ></span
                          ><span class="vlist-s">​</span></span
                        ><span class="vlist-r"
                          ><span class="vlist" style="height: 0.2441em"
                            ><span
                              class=""
                            ></span></span></span></span></span></span
                  ><span class="mspace" style="margin-right: 0.2778em"></span
                  ><span class="mrel">∼</span
                  ><span
                    class="mspace"
                    style="margin-right: 0.2778em"
                  ></span></span
                ><span class="base"
                  ><span
                    class="strut"
                    style="height: 1em; vertical-align: -0.25em"
                  ></span
                  ><span class="mord text"
                    ><span class="mord">Normal</span></span
                  ><span class="mopen">(</span
                  ><span class="mord mathnormal">μ</span
                  ><span class="mpunct">,</span
                  ><span class="mspace" style="margin-right: 0.1667em"></span
                  ><span class="mord mathnormal" style="margin-right: 0.0359em"
                    >σ</span
                  ><span class="mclose">)</span
                  ><span class="mspace nobreak">&nbsp;</span
                  ><span class="mspace nobreak">&nbsp;</span
                  ><span class="mspace nobreak">&nbsp;</span
                  ><span class="mord text"><span class="mord">for</span></span
                  ><span class="mspace nobreak">&nbsp;</span
                  ><span class="mord mathnormal">i</span
                  ><span class="mspace nobreak">&nbsp;</span
                  ><span class="mord text"><span class="mord">in</span></span
                  ><span class="mord">1..</span
                  ><span class="mord mathnormal">n</span></span
                ></span
              ></span
            ></span
          ></span
        >
      </p>
      <p>… and this is how it is implemented in JavaScript:</p>
      <div class="highlight">
        <pre
          tabindex="0"
          style="
            background-color: #f0f0f0;
            -moz-tab-size: 4;
            -o-tab-size: 4;
            tab-size: 4;
          "
        ><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic">/* The code below assumes that you have loaded the two modules of bayes.js:
</span></span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic"> * - mcmc.js which implements the sampler and creates the global 
</span></span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic"> *   object mcmc.
</span></span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic"> * - distributions.js which implements a number of log density functions
</span></span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic"> *   for common probability distributions and that creates the global object
</span></span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic"> *   ld (as in log density).
</span></span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic"> */</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic">// The data
</span></span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic"></span><span style="color:#007020;font-weight:bold">var</span> heights <span style="color:#666">=</span> [<span style="color:#40a070">183</span>, <span style="color:#40a070">192</span>, <span style="color:#40a070">182</span>, <span style="color:#40a070">183</span>, <span style="color:#40a070">177</span>, <span style="color:#40a070">185</span>, <span style="color:#40a070">188</span>, <span style="color:#40a070">188</span>, <span style="color:#40a070">182</span>, <span style="color:#40a070">185</span>];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic">// Parameter definitions
</span></span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic"></span><span style="color:#007020;font-weight:bold">var</span> params <span style="color:#666">=</span> {
</span></span><span style="display:flex;"><span>  mu<span style="color:#666">:</span> {type<span style="color:#666">:</span> <span style="color:#4070a0">"real"</span>},
</span></span><span style="display:flex;"><span>  sigma<span style="color:#666">:</span> {type<span style="color:#666">:</span> <span style="color:#4070a0">"real"</span>, lower<span style="color:#666">:</span> <span style="color:#40a070">0</span>}};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic">// Model definition
</span></span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic"></span><span style="color:#007020;font-weight:bold">var</span> log_post <span style="color:#666">=</span> <span style="color:#007020;font-weight:bold">function</span>(state, heights) {
</span></span><span style="display:flex;"><span>  <span style="color:#007020;font-weight:bold">var</span> log_post <span style="color:#666">=</span> <span style="color:#40a070">0</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#60a0b0;font-style:italic">// Priors (here sloppy and vague...)
</span></span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic"></span>  log_post <span style="color:#666">+=</span> ld.norm(state.mu, <span style="color:#40a070">0</span>, <span style="color:#40a070">1000</span>);
</span></span><span style="display:flex;"><span>  log_post <span style="color:#666">+=</span> ld.unif(state.sigma, <span style="color:#40a070">0</span>, <span style="color:#40a070">1000</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#60a0b0;font-style:italic">// Likelihood
</span></span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic"></span>  <span style="color:#007020;font-weight:bold">for</span>(<span style="color:#007020;font-weight:bold">var</span> i <span style="color:#666">=</span> <span style="color:#40a070">0</span>; i <span style="color:#666">&lt;</span> heights.length; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>    log_post <span style="color:#666">+=</span> ld.norm(heights[i], state.mu, state.sigma);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#007020;font-weight:bold">return</span> log_post;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic">// Initializing the sampler, burning some draws to the MCMC gods,
</span></span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic">// and generating a sample of size 1000.
</span></span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic"></span><span style="color:#007020;font-weight:bold">var</span> sampler <span style="color:#666">=</span>  <span style="color:#007020;font-weight:bold">new</span> mcmc.AmwgSampler(params, log_post, heights);
</span></span><span style="display:flex;"><span>sampler.burn(<span style="color:#40a070">1000</span>);
</span></span><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">var</span> samples <span style="color:#666">=</span> sampler.sample(<span style="color:#40a070">1000</span>);
</span></span></code></pre>
      </div>
      <p>
        I’ve implemented
        <a href="https://sumsar.net/best_online/"
          >a JavaScript MCMC procedure for fitting a Bayesian model</a
        >
        before, but that was just for a <em>specific</em> model (I also
        implemented
        <a
          href="https://www.sumsar.net/blog/2015/08/basic-mcmc-and-bayesian-statistics-in-basic/"
          >a MCMC procedure in BASIC</a
        >, but don’t ask me why…). The idea with bayes.js is to make it easier
        for me (and maybe for you) to make demos of Bayesian procedures that are
        easy to put online. If you would like to know more about bayes.js just
        head over to
        <a href="https://github.com/rasmusab/bayes.js">it’s GitHub page</a>
        where you will find the code and a README file full of details. You can
        also check out a couple of interactive demos that I’ve made:
      </p>
      <ul>
        <li>
          <a href="https://codepen.io/rasmusab/pen/LpaKep?editors=001"
            >A Normal distribution</a
          >
        </li>
        <li>
          <a href="https://codepen.io/rasmusab/pen/LGRVod?editors=001"
            >A Bernouli distribution with a Beta prior</a
          >.
        </li>
        <li>
          <a href="https://codepen.io/rasmusab/pen/VejLPX?editors=001"
            >A Bernouli model with a spike-n-slab prior</a
          >
        </li>
        <li>
          <a href="https://codepen.io/rasmusab/pen/OMROVe?editors=001"
            >An analysis of capture-recapture data</a
          >
        </li>
        <li>
          <a href="https://codepen.io/rasmusab/pen/eJdyPo?editors=001"
            >Correlation analysis / bivariate Normal model</a
          >
        </li>
        <li>
          <a href="https://codepen.io/rasmusab/pen/wMzyGE?editors=001"
            >Simple linear regression</a
          >
        </li>
        <li>
          <a href="https://codepen.io/rasmusab/pen/eJdVBm?editors=001"
            >Multivariate logistic regression</a
          >
        </li>
        <li>
          <a href="https://codepen.io/rasmusab/pen/jWMYxK?editors=001"
            >the “Pump” example from the BUGS project</a
          >
        </li>
        <li>
          <a href="https://codepen.io/rasmusab/pen/VewLoM?editors=001"
            >An hierarchical model with varying slope and intercept from Gelman
            and Hill (2006)
          </a>
          (This is stretching the limits of what the simple
          <code>AmwgSampler</code> can do…)
        </li>
      </ul>
      <p>
        These demos rely on the
        <a href="https://plot.ly/javascript/">plotly library</a> and I haven’t
        tested them extensively on different platforms/browsers. You should be
        able to change the data and model definition on the fly (but if you
        change some stuff, like adding multidimensional variables, the plotting
        might stop working).
      </p>
      <h2 id="whats-included-in-bayesjs">What’s included in bayes.js?</h2>
      <p>The two major files in bayes.js are:</p>
      <ul>
        <li>
          <strong>mcmc.js</strong> - Implements a MCMC framework which can be
          used to fit Bayesian model with both discrete and continuous
          parameters. Currently the only algorithm that is implemented is a
          version of the
          <em>adaptive Metropolis within Gibbs</em> (<code>AmwgSampler</code>)
          algorithm presented by
          <a href="https://probability.ca/jeff/ftpdir/adaptex.pdf"
            >Roberts and Rosenthal (2009) </a
          >. Loading this file in the browser creates the global object
          <code>mcmc</code>.
        </li>
        <li>
          <strong>distributions.js</strong> - A collection of log density
          functions that can be used to construct Bayesian models. Follows the
          naming scheme <code>ld.*</code> (for example, <code>ld.norm</code> and
          <code>ld.pois</code>) and uses the same parameters as the
          <code>d*</code> density functions in R. Loading this file in the
          browser creates the global object <code>ld</code>.
        </li>
      </ul>
      <p>
        In addition to this the whole thing is wrapped in an
        <a href="https://www.rstudio.com/">Rstudio</a> project as I’ve use R and
        JAGS to write some tests.
      </p>
      <h2 id="faq">FAQ</h2>
      <ul>
        <li>
          When is a JavaScript MCMC sampler useful?
          <ul>
            <li>
              Well, for starters, it’s <em>not</em> particularly useful if you
              want to do serious Bayesian data analysis. Then you should use a
              serious tool like
              <a href="https://mcmc-jags.sourceforge.net/">JAGS</a> or
              <a href="https://mc-stan.org/">STAN</a>. It could, however, be
              useful if you would want to put a demo of a Bayesian model online,
              but don’t want to / can’t run the computations on a server. It
              could also be useful as a part of a JavaScript application making
              use of Bayesian computation at some point.
            </li>
          </ul>
        </li>
        <li>
          How good is the sampler that bayes.js uses?
          <ul>
            <li>
              bayes.js implements the
              <em>adaptive Metropolis within Gibbs</em> described by
              <a href="https://probability.ca/jeff/ftpdir/adaptex.pdf"
                >Roberts and Rosenthal (2009)
              </a>
              which is a good algorithm in that (1) it’s adaptive and works
              out-of-the-box without you having to set a lot of tuning
              parameters, (2) it can handle both continuous and discrete
              parameters, (3) it is easy to implement. The downside with the
              sampler is that (1) it only works well with a small number of
              parameters, (2) it’s a Gibbs sampler so it’s going to struggle
              with correlated parameters.
            </li>
          </ul>
        </li>
        <li>
          What is “a small number of parameters”?
          <ul>
            <li>
              Depends heavily on context but &lt;10 is probably “small” here.
              But depending on the model you’re trying to run you might get away
              with 100+ parameters.
            </li>
          </ul>
        </li>
        <li>
          How fast is it?
          <ul>
            <li>
              Also super context dependent. On simple models it’s pretty fast,
              for example, fitting a standard Normal model on 1000 datapoints
              producing a sample of 20,000 draws takes ~0.5 s. on my computer.
              Also, when I’ve been playing around with different browsers I’ve
              seen order-of-magnitude changes in performance when changing
              seemingly arbitrary things. For example, inlining the definition
              of the Normal density in the function calculating the log
              posterior rather than using <code>ld.norm</code> defined in
              <strong>distributions.js</strong> resulted in 10x slower sampling
              on Firefox 37.
            </li>
          </ul>
        </li>
      </ul>
      <h2 id="references">References</h2>
      <p>
        Roberts, G. O., &amp; Rosenthal, J. S. (2009). Examples of adaptive
        MCMC. <em>Journal of Computational and Graphical Statistics</em>, 18(2),
        349-367.
        <a href="https://probability.ca/jeff/ftpdir/adaptex.pdf">pdf</a>
      </p>
      <div class="signature">
        Posted by Rasmus Bååth | 2015-12-31 | Tags:
        <a href="https://www.sumsar.net/tags/bayesian/">Bayesian</a>,
        <a href="https://www.sumsar.net/tags/r/">R</a>,
        <a href="https://www.sumsar.net/tags/statistics/">Statistics</a>,
        <a href="https://www.sumsar.net/tags/javascript/">JavaScript</a>
      </div>
    </main>
    <hr />

    <footer>
      <p>
        Copyright © 2023 - Rasmus Bååth<br />
        Licensed under a
        <a
          rel="license"
          href="https://creativecommons.org/licenses/by/4.0/deed.en_US"
          >Creative Commons Attribution 4.0 International License</a
        >
      </p>
    </footer>

    <svg
      id="js-plotly-tester"
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      style="
        position: absolute;
        left: -10000px;
        top: -10000px;
        width: 9000px;
        height: 9000px;
      "
    >
      <path
        class="js-reference-point"
        d="M0,0H1V1H0Z"
        style="stroke-width: 0; fill: black"
      ></path>
    </svg>
  </body>
  <grammarly-desktop-integration
    data-grammarly-shadow-root="true"
  ></grammarly-desktop-integration>
</html>
